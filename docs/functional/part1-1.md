# 액션, 계산, 데이터 - 1부

:::info
이 글은 "쏙쏙 들어오는 항수형 코딩"을 읽고 요약, 정리한 글입니다.
:::

## 함수형 프로그래밍이란
이론적으로는 부수효과 없이 순수함수를 사용하는 것이 특징인 프로그래밍 패러다임을 의미합니다. 그러나 DOM 업데이트, 서버에서 데이터 가져오기 등 부수효과는 함수를 실행하는 목적이기도 합니다. 따라서 실무적으로는 **부수효과를 잘 다루면서 순수함수를 주로 사용하는 방식의 프로그래밍**이라고 정리할 수 있습니다.


## 액션, 계산, 데이터 구분하기
소스코드를 액션, 계산, 데이터로 구분지어 다시 생각해볼 수 있습니다.
함수형 프로그래밍에서는 액션보다 계산을 선호하고, 계산보다 데이터를 선호합니다.
따라서 액션에서 계산으로 분리할 수 있는 부분은 분리해야하고, 계산하지 않아도 되는 값은 데이터로 유지합니다.

### 액션

**✅ 부수효과가 있는 함수, 순수하지 않는 함수라고도 부릅니다.**  
부수효과란 함수가 값을 리턴하는 것 이외에 하는 모든 일을 의미합니다.

**✅ 실행 시점과 횟수에 의존하며 외부세계에 영향을 주거나 받는 것을 말합니다.**  
실행시점과 횟수에 의존한다는 말은 함수를 언제 실행하고, 얼마나 실행하느냐에 따라 함수 실행의 영향이 달라질 수 있다는 것을 의미합니다.

**✅ 액션에는 암묵적 입력과 출력이 있습니다.**  
함수의 인자로 전달된 값이 아닌 전역상태 또는 외부의 값을 압묵적 입력이라고 합니다.  
어떠한 값을 리턴하는게 아니라 외부요소에 영향을 미칠때 암묵적 출력이라고 합니다.

**✅ 액션은 코드 전체로 퍼집니다.**  
액션함수를 호출하는 함수는 액션함수가 됩니다.


### 계산

**✅ 입력을 받아 출력을 계산하는 함수, 순수함수라고도 합니다.**  
암묵적 입출력이 없기 때문에 입력 값이 같다면 항상 같은 출력 값을 기대할 수 있습니다.  
따라서 정적분석 및 테스트하기 쉬운 함수가 됩니다.

> **정적분석**  
> 작성된 프로그램 또는 함수를 직접 실행하지 않고 소스코드를 기반으로 분석 검증하는 것

**✅ 조합하기에 유리합니다.**  
계산함수를 재조합하여 새로운 계산함수를 만들 수 있습니다.

### 데이터
**✅ 이벤트에 대한 사실, 결과입니다.**  
사용자가 입력한 이메일, 데이터베이스에서 읽은 회원이름 같이 어떤 값, 결과 자체입니다. 따라서 데이터가 의미를 가지려면 그에 대한 해석이 필요합니다.

**✅ 함수가 아닌 기본데이터 타입으로 구현합니다.**  
숫자, 문자, 배열, 객체 등 데이터 타입을 사용하여 표현하게 됩니다.

**✅ 불변 데이터를 만들기 위해 두가지 원칙을 사용합니다.**  
- Copy on Write: 데이터 변경 시 복사본을 생성한다.  
- Defensive Copy: 보관하려는 데이터의 복사본을 생성한다.

:::note
불변성을 지키려면 반드시 복사본을 생성해야하기 때문에 배열을 바꾸는 것보다 비용은 비쌉니다. 그러나 최신 프로그램 언어의 런타임과 가비지 컬렉터는 충분히 효율적으로 메모리를 처리하기 때문에 큰 고려사항은 아닙니다. 섣부른 최적화 보다는 필요시 고려해보는 것을 추천합니다. 따라서 불변성을 지키는 것이 더 유리합니다.
:::

**✅ 직렬화된 데이터**  
데이터를 직렬화할 경우 디스크에 저장하거나 통신시에도 함수에 비해 보존이 잘 됩니다.


## 계산 추출하기
1. 계산 코드를 찾아 빼냅니다
2. 새 함수에 암묵적 입력과 출력을 찾습니다
3. 암묵적 입력은 인자로 암묵적 출력은 리턴값으로 바꿉니다.
4. 더 재사용가능한 유틸리티 함수로 변경하기

## 더 좋은 액션
액션은 가능한 적게 사용하고 가능한 작게 만드는게 좋습니다.
1. 비즈니스 요구 사항과 설계를 맞추기
2. 비즈니스 요구 사항과 함수를 맞추기
3. 원칙: 암묵적 입력과 출력을 적을수록 좋습니다.
     - 명시적 입력과 출력은 함수를 쉽게 뗴었다 붙일 수 있는 모듈로 만듭니다.
4. 원칙: 설계는 엉켜있는 코드를 푸는 것입니다.
5. 함수는 작을 수록 좋다
   - 재사용하기 쉽다
   - 유지보수하기 쉽다
   - 테스트하기 쉽다
