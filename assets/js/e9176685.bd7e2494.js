"use strict";(self.webpackChunkmitchell_dictionary=self.webpackChunkmitchell_dictionary||[]).push([[2362],{6325:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>l});var c=t(5893),s=t(1151);const o={authors:"mitchell",title:"SocketIO\ub97c \ud65c\uc6a9\ud55c \ub9ac\uc561\ud2b8 \uc2e4\uc2dc\uac04\ud1b5\uc2e0 \ud14c\uc2a4\ud305",date:new Date("2024-02-09T00:00:00.000Z"),tags:["socket","websocket","javascript","react","typescript","socket.io","jest","vitest","testing-library"],description:"SocketIO\ub97c \ud65c\uc6a9\ud558\uc5ec \ub9ac\uc561\ud2b8\uc5d0\uc11c \uc2e4\uc2dc\uac04 \ud1b5\uc2e0 \uc720\ub2db, \ud1b5\ud569\ud14c\uc2a4\ud2b8\ub97c \uc791\uc131\ud558\ub294 \ubc29\ubc95",keywords:["socket","websocket","javascript","react","typescript","socket.io","jest","vitest","testing-library"],enableComments:!0},r="SocketIO\ub97c \ud65c\uc6a9\ud55c \ub9ac\uc561\ud2b8 \uc2e4\uc2dc\uac04\ud1b5\uc2e0 \ud14c\uc2a4\ud305",i={permalink:"/mitchell-dictionary/blog/testing-socket",source:"@site/blog/testing-socket/index.mdx",title:"SocketIO\ub97c \ud65c\uc6a9\ud55c \ub9ac\uc561\ud2b8 \uc2e4\uc2dc\uac04\ud1b5\uc2e0 \ud14c\uc2a4\ud305",description:"SocketIO\ub97c \ud65c\uc6a9\ud558\uc5ec \ub9ac\uc561\ud2b8\uc5d0\uc11c \uc2e4\uc2dc\uac04 \ud1b5\uc2e0 \uc720\ub2db, \ud1b5\ud569\ud14c\uc2a4\ud2b8\ub97c \uc791\uc131\ud558\ub294 \ubc29\ubc95",date:"2024-02-09T00:00:00.000Z",formattedDate:"2024\ub144 2\uc6d4 9\uc77c",tags:[{label:"socket",permalink:"/mitchell-dictionary/blog/tags/socket"},{label:"websocket",permalink:"/mitchell-dictionary/blog/tags/websocket"},{label:"javascript",permalink:"/mitchell-dictionary/blog/tags/javascript"},{label:"react",permalink:"/mitchell-dictionary/blog/tags/react"},{label:"typescript",permalink:"/mitchell-dictionary/blog/tags/typescript"},{label:"socket.io",permalink:"/mitchell-dictionary/blog/tags/socket-io"},{label:"jest",permalink:"/mitchell-dictionary/blog/tags/jest"},{label:"vitest",permalink:"/mitchell-dictionary/blog/tags/vitest"},{label:"testing-library",permalink:"/mitchell-dictionary/blog/tags/testing-library"}],readingTime:17,hasTruncateMarker:!0,authors:[{name:"Mitchell",title:"Frontend Developer",url:"https://github.com/mitchell-up",imageURL:"https://github.com/mitchell-up.png",key:"mitchell"}],frontMatter:{authors:"mitchell",title:"SocketIO\ub97c \ud65c\uc6a9\ud55c \ub9ac\uc561\ud2b8 \uc2e4\uc2dc\uac04\ud1b5\uc2e0 \ud14c\uc2a4\ud305",date:"2024-02-09T00:00:00.000Z",tags:["socket","websocket","javascript","react","typescript","socket.io","jest","vitest","testing-library"],description:"SocketIO\ub97c \ud65c\uc6a9\ud558\uc5ec \ub9ac\uc561\ud2b8\uc5d0\uc11c \uc2e4\uc2dc\uac04 \ud1b5\uc2e0 \uc720\ub2db, \ud1b5\ud569\ud14c\uc2a4\ud2b8\ub97c \uc791\uc131\ud558\ub294 \ubc29\ubc95",keywords:["socket","websocket","javascript","react","typescript","socket.io","jest","vitest","testing-library"],enableComments:!0},unlisted:!1,prevItem:{title:"\uc790\ubc14\uc2a4\ud06c\ub9bd\ud2b8 \ube44\ud2b8\uc5f0\uc0b0\uc790 \ud65c\uc6a9\ud558\uae30",permalink:"/mitchell-dictionary/blog/bit-masking"},nextItem:{title:"Emotion\uc774 CSS\ub97c \uc0dd\uc131\ud558\ub294 \ubc29\ubc95",permalink:"/mitchell-dictionary/blog/emotion/emotion-mechanism"}},a={authorsImageUrls:[void 0]},l=[{value:"\ub4e4\uc5b4\uac00\uae30 \uc804\uc5d0",id:"\ub4e4\uc5b4\uac00\uae30-\uc804\uc5d0",level:2},{value:"\uc120\uc218\uc9c0\uc2dd",id:"\uc120\uc218\uc9c0\uc2dd",level:3},{value:"\ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4",id:"\ud14c\uc2a4\ud2b8-\ucf00\uc774\uc2a4",level:2},{value:"\ud14c\uc2a4\ud2b8 \ucf54\ub4dc",id:"\ud14c\uc2a4\ud2b8-\ucf54\ub4dc",level:2},{value:"1. UI \ud14c\uc2a4\ud2b8",id:"1-ui-\ud14c\uc2a4\ud2b8",level:3},{value:"2. Socket Mocking",id:"2-socket-mocking",level:3},{value:"3. \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc5d0\uc11c fakeUrl\ub85c Socket \uc5f0\uacb0\ud558\uae30",id:"3-\ud14c\uc2a4\ud2b8-\ud658\uacbd\uc5d0\uc11c-fakeurl\ub85c-socket-\uc5f0\uacb0\ud558\uae30",level:3},{value:"4. \uc2e4\ud328\ud558\ub294 \ud14c\uc2a4\ud2b8 \ud655\uc778",id:"4-\uc2e4\ud328\ud558\ub294-\ud14c\uc2a4\ud2b8-\ud655\uc778",level:3},{value:"\uccab\ubc88\uc9f8 \ucf00\uc774\uc2a4",id:"\uccab\ubc88\uc9f8-\ucf00\uc774\uc2a4",level:2},{value:"\ud14c\uc2a4\ud2b8 \uacb0\uacfc",id:"\ud14c\uc2a4\ud2b8-\uacb0\uacfc",level:3},{value:"\ub450\ubc88\uc9f8 \ucf00\uc774\uc2a4",id:"\ub450\ubc88\uc9f8-\ucf00\uc774\uc2a4",level:2},{value:"\ud14c\uc2a4\ud2b8 \uacb0\uacfc",id:"\ud14c\uc2a4\ud2b8-\uacb0\uacfc-1",level:3},{value:"\ud14c\uc2a4\ud2b8 \ud1b5\uacfc\uc2dc\ud0a4\uae30",id:"\ud14c\uc2a4\ud2b8-\ud1b5\uacfc\uc2dc\ud0a4\uae30",level:3},{value:"\uc138\ubc88\uc9f8 \ucf00\uc774\uc2a4",id:"\uc138\ubc88\uc9f8-\ucf00\uc774\uc2a4",level:2},{value:"\ud14c\uc2a4\ud2b8 \uacb0\uacfc",id:"\ud14c\uc2a4\ud2b8-\uacb0\uacfc-2",level:3},{value:"\ud14c\uc2a4\ud2b8 \ud1b5\uacfc\uc2dc\ud0a4\uae30",id:"\ud14c\uc2a4\ud2b8-\ud1b5\uacfc\uc2dc\ud0a4\uae30-1",level:3},{value:"\uc815\ub9ac",id:"\uc815\ub9ac",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",br:"br",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.a)(),...e.components};return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(n.h2,{id:"\ub4e4\uc5b4\uac00\uae30-\uc804\uc5d0",children:"\ub4e4\uc5b4\uac00\uae30 \uc804\uc5d0"}),"\n",(0,c.jsxs)(n.p,{children:["\ucef4\ud3ec\ub10c\ud2b8 ",(0,c.jsx)(n.strong,{children:"\ub2e8\uc704 \ud14c\uc2a4\ud2b8"}),"\ub97c \uc791\uc131\ud560 \ub54c\uc758 \uc8fc\uc694 \uad00\uc2ec\uc0ac\uac00 \ubb34\uc5c7\uc77c\uae4c\uc694? \uc11c\ubc84\ub098 \uc678\ubd80\uc5d0\uc11c \ub370\uc774\ud130\uac00 \uc815\uc0c1\uc801\uc73c\ub85c \uc804\ub2ec\ub418\uc5c8\ub2e4\ub294 \uac83\uc744 \uac00\uc815\ud558\uace0, UI\uac00 \uc758\ub3c4\ub300\ub85c \ub80c\ub354\ub9c1\ub418\ub294\uac00\uc5d0 \uad00\uc2ec\uc744 \ub461\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(n.p,{children:["\uadf8\ub7f0\ub370 \ud1b5\ud569\ud14c\uc2a4\ud2b8 \ub2e8\uacc4\uc5d0\uc11c\ub294 \uadf8\ub7ec\ud55c \ub370\uc774\ud130\uac00 \uc804\ub2ec\ub418\ub294 \uc0c1\ud669\uc744 Mocking \ud574\uc57c\ud560 \ud544\uc694\uac00 \uc788\uc2b5\ub2c8\ub2e4. \uadf8\ub798\uc11c ",(0,c.jsx)(n.a,{href:"https://mswjs.io/",children:"msw"}),"\uc640 \uac19\uc740 \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ud65c\uc6a9\ud558\uc5ec \ud558\uc5ec \ud14c\uc2a4\ud2b8\ub97c \uc11c\ubc84\ub85c\ubd80\ud130 \uc624\ub294 \ub2e8\ubc29\ud5a5 \ud1b5\uc2e0\uc5d0 \ub300\ud574 Mocking \ud558\uc5ec \ud1b5\ud569\ud14c\uc2a4\ud2b8\ub97c \ub9c8\ubb34\ub9ac\ud560 \uc218 \uc788\uac8c \ub429\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(n.p,{children:"\uadf8\ub7ec\ub098 msw\uc5d0\uc11c\ub294 WebSocket\uacfc \uac19\uc740 \uc591\ubc29\ud5a5 \ud1b5\uc2e0\uc5d0 \ub300\ud55c \uc9c0\uc6d0\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc544 \ucc44\ud305\uacfc \uac19\uc740 \uc2e4\uc2dc\uac04\uc11c\ube44\uc2a4\uc758 \ud1b5\ud569\ud14c\uc2a4\ud305\uc744 \uc791\uc131\ud558\ub294\ub370\ub294 \uc801\ud569\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub530\ub77c\uc11c Socket.IO\uac00 \uc81c\uacf5\ud558\ub294 \ud14c\uc2a4\ud305 \uc608\uc81c\ub97c \ud65c\uc6a9\ud558\uc5ec \uc11c\ubc84\uc640\uc758 \uc591\ubc29\ud5a5 \ud1b5\uc2e0\uc744 Mocking \ud560 \uc218 \uc788\ub294 \ubc29\ubc95\uc744 \uacf5\uc720\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsx)(n.h3,{id:"\uc120\uc218\uc9c0\uc2dd",children:"\uc120\uc218\uc9c0\uc2dd"}),"\n",(0,c.jsx)(n.p,{children:"\uc774 \uae00\uc5d0\uc11c \uc0ac\uc6a9\ud558\ub294 \uae30\uc220\ub4e4\uc5d0 \ub300\ud55c \uc0c1\uc138\ud55c \uc0ac\uc6a9\ubc95\uc5d0 \ub300\ud574\uc11c\ub294 \uc124\uba85\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsxs)(n.ul,{children:["\n",(0,c.jsx)(n.li,{children:"React"}),"\n",(0,c.jsx)(n.li,{children:"Socket.IO"}),"\n",(0,c.jsx)(n.li,{children:"Vitest, testing-library"}),"\n"]}),"\n",(0,c.jsx)(n.admonition,{type:"warning",children:(0,c.jsxs)(n.p,{children:["\uc774 \ud3ec\uc2a4\ud2b8\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \ubc29\uc2dd\uc740 \uc2e4\uc2dc\uac04 \ud1b5\uc2e0\uc744 Socket.IO \ub77c\uc774\ube0c\ub7ec\ub9ac\ub97c \ud65c\uc6a9\ud558\ub294 \uacbd\uc6b0\ub85c \ud55c\uc815\ud558\uc5ec \uc791\ub3d9\ud569\ub2c8\ub2e4.",(0,c.jsx)(n.br,{}),"\n",(0,c.jsx)(n.a,{href:"https://socket.io/docs/v4/testing/",children:"Socket.IO \uc608\uc81c\ubcf4\uae30"})]})}),"\n",(0,c.jsx)(n.p,{children:"\uc608\uc2dc\ub85c \uc544\uc8fc \uac04\ub2e8\ud55c \ucc44\ud305\uc11c\ube44\uc2a4\ub97c \ub9cc\ub4e4\uc5b4\ubcf4\uaca0\uc2b5\ub2c8\ub2e4. \ub2e8\uc704\ud14c\uc2a4\ud2b8\ub294 \uc0dd\ub7b5\ud558\uace0 \ud1b5\ud569\ud14c\uc2a4\ud2b8 \uc791\uc131 \ud6c4 \ucef4\ud3ec\ub10c\ud2b8 \uad6c\ud604\uae4c\uc9c0 \uc9c4\ud589\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4. \uae30\ub2a5\uc740 \ub2e4\uc74c\uacfc \uac19\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsx)(n.li,{children:"\uc0c1\ub300\ubc29\uc774 \ucc44\ud305\uc744 \ubcf4\ub0b4\uba74 \ub0b4\uac00 \ud655\uc778 \ud560 \uc218 \uc788\ub2e4."}),"\n",(0,c.jsx)(n.li,{children:"\ub0b4\uac00 \ucc44\ud305\uc744 \ubcf4\ub0b4\uba74 \uc0c1\ub300\ubc29\uc774 \ub2f5\uc7a5\uc744 \ud574\uc900\ub2e4."}),"\n"]}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"\ud14c\uc2a4\ud2b8-\ucf00\uc774\uc2a4",children:"\ud14c\uc2a4\ud2b8 \ucf00\uc774\uc2a4"}),"\n",(0,c.jsx)(n.p,{children:"\uac04\ub2e8\ud55c \ucc44\ud305\uc11c\ube44\uc2a4 \ub2f5\uac8c \ucf00\uc774\uc2a4\ub3c4 \ub9e4\uc6b0 \uac04\ub2e8\ud569\ub2c8\ub2e4."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"describe('<Chat/>', () => {\n  test('\ucc44\ud305\uc744 \uc2dc\uc791\ud558\uba74 \uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ud14d\uc2a4\ud2b8\uac00 \ubcf4\uc778\ub2e4.', () => {})\n\n  test('\uc0c1\ub300\ubc29\uc774 \ucc44\ud305\uc744 \ubcf4\ub0b4\uba74 \ub0b4\uc6a9\uc774 \ubcf4\uc778\ub2e4.', () => {})\n\n  test('\"\uc548\ub155\"\uc774\ub77c\uace0 \ubcf4\ub0b4\uba74 \"\ub098\ub3c4 \uc548\ub155\"\uc774\ub77c\uace0 \ub300\ub2f5\uc774 \uc628\ub2e4.', () => {})\n})\n"})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"\ud14c\uc2a4\ud2b8-\ucf54\ub4dc",children:"\ud14c\uc2a4\ud2b8 \ucf54\ub4dc"}),"\n",(0,c.jsx)(n.h3,{id:"1-ui-\ud14c\uc2a4\ud2b8",children:"1. UI \ud14c\uc2a4\ud2b8"}),"\n",(0,c.jsx)(n.p,{children:"Socket \ud1b5\uc2e0\uc5d0 \ub300\ud55c \ud14c\uc2a4\ud2b8\ucf54\ub4dc\ub294 \uc81c\uc678\ud558\uace0 \uc6b0\uc120 UI\uc5d0 \ub300\ud574 \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \uc544\ub798\uc640 \uac19\uc774 \uc791\uc131\ud569\ub2c8\ub2e4. \ubbf8\ub9ac \uc608\uc0c1\ud574\uc11c \uc791\uc131\ud574\ub454 \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\uc774\uae30 \ub54c\ubb38\uc5d0 \uac1c\ubc1c\uc774 \uc9c4\ud589\ub418\uba74\uc11c \uad6c\ud604 \ub0b4\uc6a9\uc774 \uacc4\uc18d \ubc1c\uc804\ub420 \uc608\uc815\uc785\ub2c8\ub2e4."}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"import { fireEvent, render } from '@testing-library/react'\nimport Chat from './chat'\n\ndescribe('<Chat/>', () => {\n  test('\ucc44\ud305\uc744 \uc2dc\uc791\ud558\uba74 \uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ud14d\uc2a4\ud2b8\uac00 \ubcf4\uc778\ub2e4.', async () => {\n    const { getByText, findByText } = renderChat(fakeUrl)\n\n    const beforeConnect = getByText('\uc811\uc18d\uc911\uc785\ub2c8\ub2e4.')\n    expect(beforeConnect).toBeInTheDocument()\n\n    const connectTest = await findByText('\uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.')\n    expect(connectTest).toBeInTheDocument()\n  })\n\n  test('\uc0c1\ub300\ubc29\uc774 \ucc44\ud305\uc744 \ubcf4\ub0b4\uba74 \ub0b4\uc6a9\uc774 \ubcf4\uc778\ub2e4.', async () => {\n    const { findByText } = render(<Chat />)\n\n    // TODO: \uc0c1\ub300\ubc29\uc774 \ucc44\ud305\uc744 \ubcf4\ub0b4\ub294 \uc0c1\ud669 Mocking\n\n    const chatBySomeone = await findByText('\uc548\ub155\ud558\uc138\uc694')\n\n    expect(chatBySomeone).toBeInTheDocument()\n  })\n\n  test('\"\uc548\ub155\"\uc774\ub77c\uace0 \ubcf4\ub0b4\uba74 \"\ub098\ub3c4 \uc548\ub155\"\uc774\ub77c\uace0 \ub300\ub2f5\uc774 \uc628\ub2e4.', async () => {\n    const { getByPlaceholderText, getByRole, findByText } = render(<Chat />)\n\n    const input = getByPlaceholderText('\ud14d\uc2a4\ud2b8\ub97c \uc785\ub825\ud558\uc138\uc694')\n    fireEvent.change(input, { target: { value: '\uc548\ub155' } })\n\n    const button = getByRole('button')\n    fireEvent.click(button)\n\n    const chatByMe = await findByText('\uc548\ub155')\n    expect(chatByMe).toBeInTheDocument()\n\n    const chatBySomeone = await findByText('\ub098\ub3c4 \uc548\ub155')\n    expect(chatBySomeone).toBeInTheDocument()\n  })\n})\n"})}),"\n",(0,c.jsx)(n.h3,{id:"2-socket-mocking",children:"2. Socket Mocking"}),"\n",(0,c.jsxs)(n.blockquote,{children:["\n",(0,c.jsx)(n.p,{children:"\uacf5\uc2dd\ubb38\uc11c\uc5d0 \uc788\ub294 \ubc29\ubc95\uc73c\ub85c \uad6c\ud604\ud558\uc600\uc2b5\ub2c8\ub2e4."}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"import { fireEvent, render } from '@testing-library/react'\nimport Chat from './chat'\nimport { io as ioc, type Socket as ClientSocket } from 'socket.io-client'\nimport { Server, type Socket as ServerSocket } from 'socket.io'\nimport { createServer } from 'http'\nimport { AddressInfo } from 'net'\nimport { SOCKET_EVENTS } from './mocks/ChatSocket'\n\ndescribe('<Chat/>', () => {\n  /**\n   * Mock Socket\n   */\n  let io: Server,\n    serverSocket: ServerSocket,\n    clientSocket: ClientSocket,\n    fakeUrl: string\n\n  beforeAll(() => {\n    return new Promise<void>((resolve) => {\n      const httpServer = createServer()\n      io = new Server(httpServer)\n\n      httpServer.listen(() => {\n        const port = (httpServer.address() as AddressInfo).port\n        fakeUrl = `http://localhost:${port}`\n        clientSocket = ioc(fakeUrl)\n\n        // \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \uc5f0\uacb0\uc744 \uc2dc\ub3c4\ud558\uba74 \uc11c\ubc84\uc18c\ucf13\uc774 \ubcc0\uc218\uc5d0 \ud560\ub2f9\ub41c\ub2e4.\n        io.on(SOCKET_EVENTS.CONNECT, (socket) => {\n            serverSocket = socket\n        })\n\n        // \uc18c\ucf13\uc778 \uc5f0\uacb0\ub418\uba74 beforeAll\uc744 \ub9c8\uce5c\ub2e4.\n        clientSocket.on(SOCKET_EVENTS.CONNECT, resolve)\n      })\n    })\n  })\n  \n  afterAll(() => {\n    io.close()\n    clientSocket.disconnect()\n  })\n\n\t///... \ub098\uba38\uc9c0 \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub4e4 ...///\n})\n\n"})}),"\n",(0,c.jsx)(n.h3,{id:"3-\ud14c\uc2a4\ud2b8-\ud658\uacbd\uc5d0\uc11c-fakeurl\ub85c-socket-\uc5f0\uacb0\ud558\uae30",children:"3. \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc5d0\uc11c fakeUrl\ub85c Socket \uc5f0\uacb0\ud558\uae30"}),"\n",(0,c.jsxs)(n.p,{children:[(0,c.jsx)(n.code,{children:"ServerSocket"}),"\uc744 Mocking\ud558\uba74\uc11c ",(0,c.jsx)(n.code,{children:"fakeUrl"}),"\uc744 \uc5bb\uc744 \uc218 \uc788\uc5c8\ub294\ub370\uc694. ",(0,c.jsx)(n.code,{children:"<Chat/>"}),"\ub0b4\ubd80\uc5d0\uc11c\ub294 ",(0,c.jsx)(n.code,{children:"ServerSocket"}),"\uc5d0 \uc5f0\uacb0\ud558\uae30 \uc704\ud55c URL\uc774 \ud544\uc694\ud560\uac81\ub2c8\ub2e4. \uc2e4\uc11c\ube44\uc2a4\uc5d0\uc11c\ub294 \uc2e4\uc81c URL\uc744 \uc0ac\uc6a9\ud558\uace0 \ud604\uc7ac \ud14c\uc2a4\ud2b8 \ud658\uacbd\uc5d0\uc11c\ub294 ",(0,c.jsx)(n.code,{children:"fakeUrl"}),"\ub85c \ub300\uccb4\ud558\uc5ec \uc0ac\uc6a9\ud558\uba74 \ub418\uaca0\uc2b5\ub2c8\ub2e4. \ub2e4\uc74c\uc5d0 \ub530\ub77c \ud14c\uc2a4\ud2b8 \ucf54\ub4dc\ub97c \uc218\uc815\ud569\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(n.ol,{children:["\n",(0,c.jsxs)(n.li,{children:["\ucef4\ud3ec\ub10c\ud2b8\uac00 ",(0,c.jsx)(n.code,{children:"ServerSocket"})," \uc5f0\uacb0\uc744 \uc704\ud55c \uc8fc\uc18c\ub97c \ud560\ub2f9\ubc1b\ub3c4\ub85d \uc218\uc815"]}),"\n",(0,c.jsxs)(n.li,{children:["\uac01 \ud14c\uc2a4\ud2b8\uc5d0\uc11c \uc0ac\uc6a9\ud560 renderer\uc778 ",(0,c.jsx)(n.code,{children:"renderChat"}),"\ub97c \ub9cc\ub4e4\uae30"]}),"\n",(0,c.jsx)(n.li,{children:"\uac01 \ud14c\uc2a4\ud2b8\ucf00\uc774\uc2a4\uc5d0 \uc801\uc6a9"}),"\n"]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"import { fireEvent, render } from '@testing-library/react'\nimport Chat from './chat'\nimport { io as ioc, type Socket as ClientSocket } from 'socket.io-client'\nimport { Server, type Socket as ServerSocket } from 'socket.io'\nimport { createServer } from 'http'\nimport { AddressInfo } from 'net'\nimport { SOCKET_EVENTS } from './mocks/ChatSocket'\n\n/**\n * Chat \ucef4\ud3ec\ub10c\ud2b8 renderer\n */\nconst renderChat = (socketUrl: string) => {\n    return render(<Chat socketUrl={socketUrl} />)\n}\n\ndescribe('<Chat/>', () => {\n  /**\n   * Mock Socket\n   */\n  let io: Server,\n    serverSocket: ServerSocket,\n    clientSocket: ClientSocket,\n    fakeUrl: string\n\n  beforeAll(() => {\n    return new Promise<void>((resolve) => {\n      const httpServer = createServer()\n      io = new Server(httpServer)\n\n      httpServer.listen(() => {\n        const port = (httpServer.address() as AddressInfo).port\n        fakeUrl = `http://localhost:${port}`\n        clientSocket = ioc(fakeUrl)\n\n        // \ud074\ub77c\uc774\uc5b8\ud2b8\uc5d0\uc11c \uc5f0\uacb0\uc744 \uc2dc\ub3c4\ud558\uba74 \uc11c\ubc84\uc18c\ucf13\uc774 \ubcc0\uc218\uc5d0 \ud560\ub2f9\ub41c\ub2e4.\n        io.on(SOCKET_EVENTS.CONNECT, (socket) => {\n            serverSocket = socket\n        })\n\n        // \uc18c\ucf13\uc778 \uc5f0\uacb0\ub418\uba74 beforeAll\uc744 \ub9c8\uce5c\ub2e4.\n        clientSocket.on(SOCKET_EVENTS.CONNECT, resolve)\n      })\n    })\n  })\n  \n  afterAll(() => {\n    io.close()\n    clientSocket.disconnect()\n  })\n\n  test('\ucc44\ud305\uc744 \uc2dc\uc791\ud558\uba74 \uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ud14d\uc2a4\ud2b8\uac00 \ubcf4\uc778\ub2e4.', async () => {\n    // \ub80c\ub354\ub7ec\ub97c \uc801\uc6a9\ud558\uace0 fakeUrl \uc804\ub2ec\n    const { getByText, findByText } = renderChat(fakeUrl)\n\n    const beforeConnect = getByText('\uc811\uc18d\uc911\uc785\ub2c8\ub2e4.')\n    expect(beforeConnect).toBeInTheDocument()\n\n    const connectTest = await findByText('\uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.')\n    expect(connectTest).toBeInTheDocument()\n  })\n\n  test('\uc0c1\ub300\ubc29\uc774 \ucc44\ud305\uc744 \ubcf4\ub0b4\uba74 \ub0b4\uc6a9\uc774 \ubcf4\uc778\ub2e4.', async () => {\n    // \ub80c\ub354\ub7ec\ub97c \uc801\uc6a9\ud558\uace0 fakeUrl \uc804\ub2ec\n    const { findByText } = renderChat(fakeUrl)\n\n    // \uc0c1\ub300\ubc29\uc774 \ucc44\ud305\uc744 \ubcf4\ub0b4\ub294 \uc0c1\ud669 Mocking\n\n    const chatBySomeone = await findByText('\uc548\ub155\ud558\uc138\uc694')\n\n    expect(chatBySomeone).toBeInTheDocument()\n  })\n\n  test('\"\uc548\ub155\"\uc774\ub77c\uace0 \ubcf4\ub0b4\uba74 \"\ub098\ub3c4 \uc548\ub155\"\uc774\ub77c\uace0 \ub300\ub2f5\uc774 \uc628\ub2e4.', async () => {\n    // \ub80c\ub354\ub7ec\ub97c \uc801\uc6a9\ud558\uace0 fakeUrl \uc804\ub2ec\n    const { getByPlaceholderText, getByRole, findByText } =\n        renderChat(fakeUrl)\n\n    const input = getByPlaceholderText('\ud14d\uc2a4\ud2b8\ub97c \uc785\ub825\ud558\uc138\uc694')\n    fireEvent.change(input, { target: { value: '\uc548\ub155' } })\n\n    const button = getByRole('button')\n    fireEvent.click(button)\n\n    const chatByMe = await findByText('\uc548\ub155')\n    expect(chatByMe).toBeInTheDocument()\n\n    const chatBySomeone = await findByText('\ub098\ub3c4 \uc548\ub155')\n    expect(chatBySomeone).toBeInTheDocument()\n  })\n})\n"})}),"\n",(0,c.jsx)(n.h3,{id:"4-\uc2e4\ud328\ud558\ub294-\ud14c\uc2a4\ud2b8-\ud655\uc778",children:"4. \uc2e4\ud328\ud558\ub294 \ud14c\uc2a4\ud2b8 \ud655\uc778"}),"\n",(0,c.jsxs)(n.p,{children:["\ud14c\uc2a4\ud2b8\ub4e4\uc774 \ubaa8\ub450 \uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4. \uc774\uc81c \ud14c\uc2a4\ud2b8\ub97c \ud1b5\uacfc\ud560 \uc218 \uc788\ub3c4\ub85d ",(0,c.jsx)(n.code,{children:"<Chat/>"})," \ucef4\ud3ec\ub10c\ud2b8\ub97c \uad6c\ud604\ud558\uaca0\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"fail_case1",src:t(7671).Z+"",width:"884",height:"180"})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"\uccab\ubc88\uc9f8-\ucf00\uc774\uc2a4",children:"\uccab\ubc88\uc9f8 \ucf00\uc774\uc2a4"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.em,{children:'\ucc44\ud305\uc744 \uc2dc\uc791\ud558\uba74 "\uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4." \ud14d\uc2a4\ud2b8\uac00 \ubcf4\uc778\ub2e4.'})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",metastring:'title="Chat Component"',children:"import { useEffect, useState } from 'react'\nimport { io } from 'socket.io-client'\nimport { SOCKET_EVENTS } from './mocks/ChatSocket'\n\ninterface ChatProps {\n    socketUrl: string\n}\n\nexport default function Chat({ socketUrl }: ChatProps) {\n  // Connect Flag\n  const [isConnected, setIsConnected] = useState(false)\n\n  // Socket Client\n  const [socket] = useState(\n    io(socketUrl, { autoConnect: false })\n  )\n\n  useEffect(() => {\n    socket.connect()\n\n    // \uc18c\ucf13\uc774 \uc5f0\uacb0\ub418\uc5c8\uc744 \ub54c\n    socket.on(SOCKET_EVENTS.CONNECT, () => {\n      setIsConnected(true)\n    })\n\n    // \uc18c\ucf13 \uc5f0\uacb0\uc774 \ub04a\uacbc\uc744 \ub54c\n    socket.on(SOCKET_EVENTS.DISCONNECT, () => {\n      setIsConnected(false)\n    })\n\n    return () => {\n      socket.disconnect()\n    }\n  }, [])\n\n  return (\n    <div>\n      <section>\n        {isConnected ? '\uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.' : '\uc811\uc18d\uc911\uc785\ub2c8\ub2e4.'}\n      </section>\n    </div>\n  )\n}\n"})}),"\n",(0,c.jsx)(n.h3,{id:"\ud14c\uc2a4\ud2b8-\uacb0\uacfc",children:"\ud14c\uc2a4\ud2b8 \uacb0\uacfc"}),"\n",(0,c.jsxs)(n.p,{children:["\ubaa8\ub4e0 \uae30\ub2a5\uc774 \uad6c\ud604\ub41c \uac83\uc740 \uc544\ub2c8\uc9c0\ub9cc, \uccab\ubc88\uc9f8 \ud14c\uc2a4\ud2b8\ucf00\uc774\uc2a4\ub97c \ud1b5\uacfc\ud558\ub294 ",(0,c.jsx)(n.code,{children:"<Chat/>"})," \ucef4\ud3ec\ub10c\ud2b8\ub85c \uad6c\ud604\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uac19\uc740 \ubc29\ubc95\uc73c\ub85c \ub450\ubc88\uc9f8, \uc138\ubc88\uc9f8 \ucf00\uc774\uc2a4\ub3c4 \ud1b5\uacfc\ud558\ub3c4\ub85d \uad6c\ud604\ud558\uba74 \uc6d0\ud558\ub294 \ucc44\ud305\uc11c\ube44\uc2a4\uac00 \uc644\uc131\ub420 \uac83\uc785\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"success_case1",src:t(7225).Z+"",width:"872",height:"182"})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"\ub450\ubc88\uc9f8-\ucf00\uc774\uc2a4",children:"\ub450\ubc88\uc9f8 \ucf00\uc774\uc2a4"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.em,{children:"\uc0c1\ub300\ubc29\uc774 \ucc44\ud305\uc744 \ubcf4\ub0b4\uba74 \ub0b4\uc6a9\uc774 \ubcf4\uc778\ub2e4."})}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",metastring:'title="Chat Component"',children:"import { useEffect, useState } from 'react'\nimport { io } from 'socket.io-client'\nimport { SOCKET_EVENTS } from './mocks/ChatSocket'\n\ninterface ChatProps {\n    socketUrl: string\n}\n\nexport default function Chat({ socketUrl }: ChatProps) {\n  // Connect Flag\n  const [isConnected, setIsConnected] = useState(false)\n  // Chatting\n  const [chatting, setChatting] = useState<string[]>([])\n\n  // Socket Client\n  const [socket] = useState(\n    io(socketUrl, { autoConnect: false })\n  )\n\n  useEffect(() => {\n    socket.connect()\n\n    // \uc18c\ucf13\uc774 \uc5f0\uacb0\ub418\uc5c8\uc744 \ub54c\n    socket.on(SOCKET_EVENTS.CONNECT, () => {\n      setIsConnected(true)\n    })\n\n    // \uc18c\ucf13 \uc5f0\uacb0\uc774 \ub04a\uacbc\uc744 \ub54c\n    socket.on(SOCKET_EVENTS.DISCONNECT, () => {\n      setIsConnected(false)\n    })\n\n    // \ucc44\ud305 \uba54\uc2dc\uc9c0\uac00 \ub3c4\ucc29\ud588\uc744 \ub54c\n    socket.on(\n      SOCKET_EVENTS.SEND_MESSAGE,\n      (status: string, message: string) => {\n        if (status === 'SUCCESS') {\n            setChatting((prev) => [...prev, message])\n        }\n      },\n    )\n\n    return () => {\n      socket.disconnect()\n    }\n  }, [])\n\n  return (\n    <div>\n      <section>\n        {isConnected ? '\uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.' : '\uc811\uc18d\uc911\uc785\ub2c8\ub2e4.'}\n      </section>\n\n      {/* \ucc44\ud305\uba54\uc2dc\uc9c0 */}\n      {chatting.map((chat) => (\n        <p>{chat}</p>\n      ))}\n    </div>\n  )\n}\n"})}),"\n",(0,c.jsx)(n.h3,{id:"\ud14c\uc2a4\ud2b8-\uacb0\uacfc-1",children:"\ud14c\uc2a4\ud2b8 \uacb0\uacfc"}),"\n",(0,c.jsx)(n.p,{children:'\uc2e4\ud328\ud558\uc600\uc2b5\ub2c8\ub2e4. \uc5d0\ub7ec \ub0b4\uc6a9\uc73c\ub85c\ub294 "\uc548\ub155\ud558\uc138\uc694"\ub77c\ub294 \ucc44\ud305\uba54\uc2dc\uc9c0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc5c8\ub2e4\ub294 \uac83\uc778\ub370\uc694. \uc544\ub9c8 "\uc548\ub155\ud558\uc138\uc694" \uba54\uc2dc\uc9c0\uac00 \uc624\uc9c0 \uc54a\uc544\uc11c \uc778 \uac83 \uac19\uc2b5\ub2c8\ub2e4.'}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"fail_case2",src:t(7036).Z+"",width:"1280",height:"212"})}),"\n",(0,c.jsx)(n.h3,{id:"\ud14c\uc2a4\ud2b8-\ud1b5\uacfc\uc2dc\ud0a4\uae30",children:"\ud14c\uc2a4\ud2b8 \ud1b5\uacfc\uc2dc\ud0a4\uae30"}),"\n",(0,c.jsxs)(n.p,{children:["\ud14c\uc2a4\ud2b8\ucf00\uc774\uc2a4 \ub0b4\uc6a9\uc744 \uc0b4\ud3b4\ubcf4\ub2c8, \uc0c1\ub300\ubc29\uc774 \ucc44\ud305\uc744 \ubcf4\ub0b4\ub294 \uc0c1\ud669\uc5d0 \ub300\ud55c Mocking\uc774 \uc774\ub8e8\uc5b4\uc9c0\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \uba54\uc2dc\uc9c0 \uc790\uccb4\uac00 \uc624\uc9c0 \uc54a\uc544\uc11c \uc2e4\ud328\ud588\ub2e4\uace0 \ubcfc \uc218 \uc788\uaca0\uc2b5\ub2c8\ub2e4. \uadf8\ub798\uc11c Socket\uc744 Mocking \ud558\uba74\uc11c \uc5bb\uc5c8\ub358 ",(0,c.jsx)(n.code,{children:"serverSocket"}),"\uc744 \uc774\uc6a9\ud558\uc5ec \uc0c1\ub300\ubc29\uc774 \uc800\uc5d0\uac8c \uba54\uc138\uc9c0\ub97c \ubcf4\ub0b8 \ucc99 \ub2e4\uc74c\uacfc \uac19\uc774 Mocking \ud558\uaca0\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"  test('\uc0c1\ub300\ubc29\uc774 \ucc44\ud305\uc744 \ubcf4\ub0b4\uba74 \ub0b4\uc6a9\uc774 \ubcf4\uc778\ub2e4.', async () => {\n    const { findByText } = renderChat(fakeUrl)\n\n    serverSocket.emit(SOCKET_EVENTS.SEND_MESSAGE, 'SUCCESS', '\uc548\ub155\ud558\uc138\uc694')\n\n    const chatBySomeone = await findByText('\uc548\ub155\ud558\uc138\uc694')\n    expect(chatBySomeone).toBeInTheDocument()\n  })\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\uadf8\ub7ec\ub098 \uc774 \uc0c1\ud0dc\ub85c \ud14c\uc2a4\ud2b8\ub97c \uc2e4\ud589\ud55c\ub2e4\uba74 \ud14c\uc2a4\ud2b8\ub294 \ub2e4\uc2dc \uc2e4\ud328\ud560 \uac83\uc785\ub2c8\ub2e4. \uc65c\ub0d0\ud558\uba74 \ud14c\uc2a4\ud2b8 \uc0c1\ud669 \uc548\uc5d0\uc11c ",(0,c.jsx)(n.code,{children:"<Chat/>"}),"\uc758 Socket\uc774 \uc5f0\uacb0\uc774 \uc644\ub8cc\ub41c \ud6c4\uc5d0 \uc774\ubca4\ud2b8\uac00 \ubc1c\uc0dd\ud574\uc57c \uc815\uc0c1\uc801\uc73c\ub85c '\uc548\ub155\ud558\uc138\uc694' \uba54\uc2dc\uc9c0\ub97c \ubc1b\uc744 \uc218 \uc788\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4."]}),"\n",(0,c.jsxs)(n.p,{children:["\uccab\ubc88\uc9f8 \ucf00\uc774\uc2a4\uc5d0\uc11c '\uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.' \ud14d\uc2a4\ud2b8\uac00 \ud654\uba74\uc5d0 \uc788\uc73c\uba74 Socket \uc5f0\uacb0\uc774 \uc644\ub8cc\ub418\uc5c8\ub2e4\ub294 \uac83\uc744 \ud14c\uc2a4\ud2b8 \ud588\uc5c8\uc2b5\ub2c8\ub2e4. \ub530\ub77c\uc11c \ub450\ubc88\uc9f8 \ucf00\uc774\uc2a4\uc5d0\uc11c\ub3c4 \uc5f0\uacb0 \uc644\ub8cc\ub41c \ud0c0\uc774\ubc0d\uc744 \ud574\ub2f9 \ud14d\uc2a4\ud2b8 \uac80\uc0ac\ub97c \ud1b5\ud574 \ud655\uc778\ud558\uace0 \ub098\uc11c ",(0,c.jsx)(n.code,{children:"serverSocket"}),"\uc758 \uc774\ubca4\ud2b8\ub97c \ubc1c\uc0dd\uc2dc\ud0a4\uba74 \ub418\uaca0\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"  test('\uc0c1\ub300\ubc29\uc774 \ucc44\ud305\uc744 \ubcf4\ub0b4\uba74 \ub0b4\uc6a9\uc774 \ubcf4\uc778\ub2e4.', async () => {\n    const { findByText } = renderChat(fakeUrl)\n\n    // \uc18c\ucf13 \uc5f0\uacb0\ub418\uc5c8\ub294\uc9c0 \ud655\uc778\n    expect(await findByText('\uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.')).toBeInTheDocument()\n\n    serverSocket.emit(SOCKET_EVENTS.SEND_MESSAGE, 'SUCCESS', '\uc548\ub155\ud558\uc138\uc694')\n\n    const chatBySomeone = await findByText('\uc548\ub155\ud558\uc138\uc694')\n    expect(chatBySomeone).toBeInTheDocument()\n  })\n"})}),"\n",(0,c.jsxs)(n.p,{children:["\uc774\uc820 \ub450\ubc88\uc9f8 \ucf00\uc774\uc2a4\ub3c4 \ud1b5\uacfc\ud558\ub294 ",(0,c.jsx)(n.code,{children:"<Chat/>"})," \ucef4\ud3ec\ub10c\ud2b8\uac00 \ub418\uc5c8\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"success_case2",src:t(3179).Z+"",width:"864",height:"184"})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"\uc138\ubc88\uc9f8-\ucf00\uc774\uc2a4",children:"\uc138\ubc88\uc9f8 \ucf00\uc774\uc2a4"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.em,{children:'"\uc548\ub155"\uc774\ub77c\uace0 \ubcf4\ub0b4\uba74 "\ub098\ub3c4 \uc548\ub155"\uc774\ub77c\uace0 \ub300\ub2f5\uc774 \uc628\ub2e4.'})}),"\n",(0,c.jsxs)(n.p,{children:["\ub9c8\uc9c0\ub9c9 \ucf00\uc774\uc2a4\uc5d0\uc11c\ub294 \uc9c1\uc811 \ucc44\ud305\uba54\uc2dc\uc9c0\ub97c \ubcf4\ub0b4\uace0, \uac70\uae30\uc5d0 \ub9de\ub294 \ub2f5\uc7a5\uae4c\uc9c0 \uc798 \ubc1b\uc744 \uc218 \uc788\ub294\uc9c0 \uc9c4\uc9dc \ub300\ud654\ub97c \ud558\ub294 \uac83\uc774 \uac00\ub2a5\ud558\ub3c4\ub85d ",(0,c.jsx)(n.code,{children:"<Chat/>"})," \ucef4\ud3ec\ub10c\ud2b8\ub97c \uc644\uc131\uc2dc\ud0a4\uaca0\uc2b5\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"import { ChangeEventHandler, useCallback, useEffect, useState } from 'react'\nimport { Socket, io } from 'socket.io-client'\nimport { SOCKET_EVENTS } from './mocks/ChatSocket'\n\ninterface ChatProps {\n  socketUrl: string\n}\n\nexport default function Chat({ socketUrl }: ChatProps) {\n  // Connect Flag\n  const [isConnected, setIsConnected] = useState(false)\n  // Chatting\n  const [chatting, setChatting] = useState<string[]>([])\n  // Chat Message\n  const [chat, setChat] = useState('')\n  // Socket Client\n  const [socket] = useState<Socket>(\n    io(socketUrl, {\n      autoConnect: false,\n    }),\n  )\n\n  useEffect(() => {\n    socket.connect()\n\n    // \uc18c\ucf13\uc774 \uc5f0\uacb0\ub418\uc5c8\uc744 \ub54c\n    socket.on(SOCKET_EVENTS.CONNECT, () => {\n      setIsConnected(true)\n    })\n\n    // \uc18c\ucf13 \uc5f0\uacb0\uc774 \ub04a\uacbc\uc744 \ub54c\n    socket.on(SOCKET_EVENTS.DISCONNECT, () => {\n      setIsConnected(false)\n    })\n\n    // \ucc44\ud305 \uba54\uc2dc\uc9c0\uac00 \ub3c4\ucc29\ud588\uc744 \ub54c\n    socket.on(\n      SOCKET_EVENTS.SEND_MESSAGE,\n      (status: string, message: string) => {\n        if (status === 'SUCCESS') {\n          setChatting((prev) => [...prev, message])\n        }\n      },\n    )\n\n    return () => {\n      socket.disconnect()\n    }\n  }, [])\n\n  const onChangeChat: ChangeEventHandler<HTMLInputElement> = useCallback(\n    (e) => {\n      setChat(e.target.value)\n    },\n    [setChat],\n  )\n\n  const onClickSend = useCallback(() => {\n    setChatting((prev) => [...prev, chat])\n    setChat('')\n\n    socket?.emit(SOCKET_EVENTS.SEND_MESSAGE, chat)\n  }, [socket, chat, setChatting, setChat])\n\n  return (\n    <div>\n      <section>\n          {isConnected ? '\uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.' : '\uc811\uc18d\uc911\uc785\ub2c8\ub2e4.'}\n      </section>\n\n      {/* \ucc44\ud305\uba54\uc2dc\uc9c0 */}\n      {chatting.map((chat, idx) => (\n          <p key={idx}>{chat}</p>\n      ))}\n\n      <input placeholder='\ud14d\uc2a4\ud2b8\ub97c \uc785\ub825\ud558\uc138\uc694' onChange={onChangeChat} />\n      <button role='button' onClick={onClickSend}>\n          \ubcf4\ub0b4\uae30\n      </button>\n    </div>\n  )\n}\n"})}),"\n",(0,c.jsx)(n.h3,{id:"\ud14c\uc2a4\ud2b8-\uacb0\uacfc-2",children:"\ud14c\uc2a4\ud2b8 \uacb0\uacfc"}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"fail_case3",src:t(3561).Z+"",width:"1280",height:"124"})}),"\n",(0,c.jsx)(n.p,{children:"\uc5ed\uc2dc \uc2e4\ud328\ud569\ub2c8\ub2e4. \uc774\uc804 \ud14c\uc2a4\ud2b8\ucf00\uc774\uc2a4\uc5d0\uc11c\uc640 \ub9c8\ucc2c\uac00\uc9c0\ub85c \ucc44\ud305\uc744 \ubcf4\ub0b4\uace0 \ubc1b\ub294 \ubd80\ubd84\uc5d0 \ub300\ud55c Mocking\uc774 \uc874\uc7ac\ud558\uc9c0 \uc54a\uc558\uae30 \ub54c\ubb38\uc785\ub2c8\ub2e4."}),"\n",(0,c.jsx)(n.h3,{id:"\ud14c\uc2a4\ud2b8-\ud1b5\uacfc\uc2dc\ud0a4\uae30-1",children:"\ud14c\uc2a4\ud2b8 \ud1b5\uacfc\uc2dc\ud0a4\uae30"}),"\n",(0,c.jsxs)(n.p,{children:["\uc5f0\uacb0\uc774 \uc644\ub8cc\ub41c \ud6c4\uc5d0 ",(0,c.jsx)(n.code,{children:"serverSocket"}),"\uc774 \uc0dd\uc131\ub418\uae30 \ub54c\ubb38\uc5d0 \uc0c8\ub85c\uc6b4 \uc774\ubca4\ud2b8 \ud578\ub4e4\ub7ec\ub97c \ub4f1\ub85d\ud560 \ub54c\ub3c4 \ub9c8\ucc2c\uac00\uc9c0\ub85c '\uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4' \ud14d\uc2a4\ud2b8 \ud655\uc778 \ud6c4\uc5d0 \ud574\uc8fc\ub3c4\ub85d \ud569\ub2c8\ub2e4. ",(0,c.jsx)(n.code,{children:"serverSocket.on"}),"\uc5d0\uc11c '\uc548\ub155' \uba54\uc2dc\uc9c0\ub97c \ubc1b\uc73c\uba74 '\ub098\ub3c4 \uc548\ub155' \uba54\uc2dc\uc9c0\ub97c \ub2f5\uc7a5\uc73c\ub85c \ubcf4\ub0b4\ub3c4\ub85d Mocking\ud569\ub2c8\ub2e4."]}),"\n",(0,c.jsx)(n.pre,{children:(0,c.jsx)(n.code,{className:"language-tsx",children:"  test('\"\uc548\ub155\"\uc774\ub77c\uace0 \ubcf4\ub0b4\uba74 \"\ub098\ub3c4 \uc548\ub155\"\uc774\ub77c\uace0 \ub300\ub2f5\uc774 \uc628\ub2e4.', async () => {\n    const { getByPlaceholderText, getByRole, findByText } =\n        renderChat(fakeUrl)\n\n    expect(await findByText('\uc811\uc18d\ub418\uc5c8\uc2b5\ub2c8\ub2e4.')).toBeInTheDocument()\n\n    serverSocket.on(SOCKET_EVENTS.SEND_MESSAGE, (message) => {\n      if (message === '\uc548\ub155') {\n        serverSocket.emit(\n          SOCKET_EVENTS.SEND_MESSAGE,\n          'SUCCESS',\n          '\ub098\ub3c4 \uc548\ub155',\n        )\n      }\n    })\n\n    const input = getByPlaceholderText('\ud14d\uc2a4\ud2b8\ub97c \uc785\ub825\ud558\uc138\uc694')\n    fireEvent.change(input, { target: { value: '\uc548\ub155' } })\n\n    const button = getByRole('button')\n    fireEvent.click(button)\n\n    const received = await findByText('\ub098\ub3c4 \uc548\ub155')\n    expect(received).toBeInTheDocument()\n  })\n"})}),"\n",(0,c.jsx)(n.p,{children:"\uc774\uc820 \ub9c8\uc9c0\ub9c9 \ucf00\uc774\uc2a4\uae4c\uc9c0 \uc131\uacf5\ud558\ub294 \uacb0\uacfc\ub97c \uc5bb\uc744 \uc218 \uc788\uac8c \ub418\uc5c8\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsx)(n.p,{children:(0,c.jsx)(n.img,{alt:"success_case3",src:t(1455).Z+"",width:"848",height:"422"})}),"\n",(0,c.jsx)(n.hr,{}),"\n",(0,c.jsx)(n.h2,{id:"\uc815\ub9ac",children:"\uc815\ub9ac"}),"\n",(0,c.jsx)(n.p,{children:"msw\ub97c \uc0ac\uc6a9\ud574\uc11c \uc11c\ubc84\uc751\ub2f5\uc744 Mocking \ud558\ub294 \uac83\uacfc \ub2e4\ub974\uac8c \uc9c1\uc811 \ud14c\uc2a4\ud2b8\uc288\ud2b8 \uc548\uc5d0\uc11c \uc11c\ubc84\ub97c \uc5f4\uace0 \uc694\uccad\uacfc \uc751\ub2f5\uc744 \ucee8\ud2b8\ub864 \ud574\uc57c\ud574\uc11c \uc5b4\ub824\uc6b4 \ubd80\ubd84\uc774 \uc788\uc5c8\uc2b5\ub2c8\ub2e4. \ud558\uc9c0\ub9cc Socket.IO\uc5d0\uc11c \uce5c\uc808\ud558\uac8c \uc608\uc81c\ub85c \uc81c\uc2dc\ud574 \uc900 \uac83\uc744 \ud1a0\ub300\ub85c \ud558\uba74 \uc5b4\ub835\uc9c0 \uc54a\uac8c \uc9c4\ud589\ud560 \uc218 \uc788\uc5c8\uc2b5\ub2c8\ub2e4."}),"\n",(0,c.jsx)(n.p,{children:"\uc774 \uae00\uc5d0\uc11c \uc81c\uc2dc\ud558\ub294 Mocking \uc811\uadfc \ubc29\ubc95\uc5d0 \ub300\ud574 \uc798\ubabb\ub41c \ubd80\ubd84\uc774 \uc788\uac70\ub098 \ubcf4\uc644 \ubc0f \ubcf4\ucda9\ud574\uc8fc\uc2e4 \ub0b4\uc6a9\uc774 \uc788\ub2e4\uba74 \ub313\uae00\ub85c \ub0a8\uaca8\uc8fc\uc138\uc694 \u263a\ufe0f"})]})}function h(e={}){const{wrapper:n}={...(0,s.a)(),...e.components};return n?(0,c.jsx)(n,{...e,children:(0,c.jsx)(d,{...e})}):d(e)}},7036:(e,n,t)=>{t.d(n,{Z:()=>c});const c=t.p+"assets/images/fail_case2-a3ab38483a079a186b62a9c83d152727.png"},3561:(e,n,t)=>{t.d(n,{Z:()=>c});const c=t.p+"assets/images/fail_case3-9219320d67d14dfafac75d7d7aa3963a.png"},7671:(e,n,t)=>{t.d(n,{Z:()=>c});const c=t.p+"assets/images/fail_test-761cc60e0e1ac77b22dab6ce1a93f75a.png"},7225:(e,n,t)=>{t.d(n,{Z:()=>c});const c=t.p+"assets/images/success_case1-3ff67499930a2cd2ebc35d6ee070eb36.png"},3179:(e,n,t)=>{t.d(n,{Z:()=>c});const c=t.p+"assets/images/success_case2-a7c2a860c0ae88d4aadd8d6ae75f08e8.png"},1455:(e,n,t)=>{t.d(n,{Z:()=>c});const c=t.p+"assets/images/success_case3-91e1fd33fb895475a40fb10e8f22d4e2.png"},1151:(e,n,t)=>{t.d(n,{Z:()=>i,a:()=>r});var c=t(7294);const s={},o=c.createContext(s);function r(e){const n=c.useContext(o);return c.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),c.createElement(o.Provider,{value:n},e.children)}}}]);