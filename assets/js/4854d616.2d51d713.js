"use strict";(self.webpackChunkmitchell_dictionary=self.webpackChunkmitchell_dictionary||[]).push([[3588],{6561:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>s});var a=t(5893),r=t(1151);const i={authors:"mitchell",title:"TanStack Query\uc758 Mutation Cache\uc640 meta \ud65c\uc6a9\ud558\uae30",date:new Date("2024-04-30T00:00:00.000Z"),tags:["react","frontend","error","useMutation","MutationCache","TanStack Query"],description:"rollup\uc73c\ub85c \ubc88\ub4e4\uc0ac\uc774\uc988 \uc904\uc5ec\ubcf4\uae30",keywords:["react","frontend","error","useMutation","MutationCache","TanStack Query"],enableComments:!0},o=void 0,c={permalink:"/mitchell-dictionary/blog/mutation-cache",source:"@site/blog/mutation-cache/index.mdx",title:"TanStack Query\uc758 Mutation Cache\uc640 meta \ud65c\uc6a9\ud558\uae30",description:"rollup\uc73c\ub85c \ubc88\ub4e4\uc0ac\uc774\uc988 \uc904\uc5ec\ubcf4\uae30",date:"2024-04-30T00:00:00.000Z",formattedDate:"2024\ub144 4\uc6d4 30\uc77c",tags:[{label:"react",permalink:"/mitchell-dictionary/blog/tags/react"},{label:"frontend",permalink:"/mitchell-dictionary/blog/tags/frontend"},{label:"error",permalink:"/mitchell-dictionary/blog/tags/error"},{label:"useMutation",permalink:"/mitchell-dictionary/blog/tags/use-mutation"},{label:"MutationCache",permalink:"/mitchell-dictionary/blog/tags/mutation-cache"},{label:"TanStack Query",permalink:"/mitchell-dictionary/blog/tags/tan-stack-query"}],readingTime:4.935,hasTruncateMarker:!0,authors:[{name:"Mitchell",title:"Frontend Developer",url:"https://github.com/mitchell-up",imageURL:"https://github.com/mitchell-up.png",key:"mitchell"}],frontMatter:{authors:"mitchell",title:"TanStack Query\uc758 Mutation Cache\uc640 meta \ud65c\uc6a9\ud558\uae30",date:"2024-04-30T00:00:00.000Z",tags:["react","frontend","error","useMutation","MutationCache","TanStack Query"],description:"rollup\uc73c\ub85c \ubc88\ub4e4\uc0ac\uc774\uc988 \uc904\uc5ec\ubcf4\uae30",keywords:["react","frontend","error","useMutation","MutationCache","TanStack Query"],enableComments:!0},unlisted:!1,prevItem:{title:"\ub9ac\uc561\ud2b8\ucffc\ub9ac\uc640 \uc5d0\ub7ec\ubc14\uc6b4\ub354\ub9ac\ub97c \ud65c\uc6a9\ud55c React \ud504\ub860\ud2b8\uc5d4\ub4dc \uc5d0\ub7ec \ucc98\ub9ac \ubc29\ubc95",permalink:"/mitchell-dictionary/blog/error-handle"},nextItem:{title:"renderHook\uc758 \uc0c1\ud0dc\ubcc0\ud654\uac00 \ubc1c\uc0dd\ud558\uc9c0 \uc54a\ub294 \uacbd\uc6b0",permalink:"/mitchell-dictionary/blog/render-hook"}},l={authorsImageUrls:[void 0]},s=[{value:"TanStack Query\uc758 Mutation Cache\uc640 meta \ud65c\uc6a9\ud558\uae30",id:"tanstack-query\uc758-mutation-cache\uc640-meta-\ud65c\uc6a9\ud558\uae30",level:3},{value:"QueryClient \uc0b4\ud3b4\ubcf4\uae30",id:"queryclient-\uc0b4\ud3b4\ubcf4\uae30",level:2},{value:"Mutation Cache",id:"mutation-cache",level:2},{value:"Mutation Cache\uc640 Meta \uc815\ubcf4 \ud65c\uc6a9\ud558\uae30",id:"mutation-cache\uc640-meta-\uc815\ubcf4-\ud65c\uc6a9\ud558\uae30",level:2},{value:"meta \ud0c0\uc785 \uc9c0\uc815\ud558\uae30",id:"meta-\ud0c0\uc785-\uc9c0\uc815\ud558\uae30",level:3},{value:"meta \uc815\ubcf4 \uc0ac\uc6a9\ud558\uae30",id:"meta-\uc815\ubcf4-\uc0ac\uc6a9\ud558\uae30",level:3},{value:"callback \uc2e4\ud589",id:"callback-\uc2e4\ud589",level:3},{value:"\uc815\ub9ac",id:"\uc815\ub9ac",level:2}];function u(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h3,{id:"tanstack-query\uc758-mutation-cache\uc640-meta-\ud65c\uc6a9\ud558\uae30",children:"TanStack Query\uc758 Mutation Cache\uc640 meta \ud65c\uc6a9\ud558\uae30"}),"\n",(0,a.jsx)(n.p,{children:"Mutation\uc744 \uc911\uc2ec\uc73c\ub85c Mutation Cache\uc640 meta \ub370\uc774\ud130\ub97c \ud65c\uc6a9\ud558\ub294 \ubc29\ubc95\uc5d0 \ub300\ud574\uc11c \uacf5\uc720\ud569\ub2c8\ub2e4. (Query\uc640 \uad00\ub828\ub41c \ud65c\uc6a9\uc5d0\uc11c\ub3c4 \ub3d9\uc77c\ud569\ub2c8\ub2e4.)"}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.h2,{id:"queryclient-\uc0b4\ud3b4\ubcf4\uae30",children:"QueryClient \uc0b4\ud3b4\ubcf4\uae30"}),"\n",(0,a.jsxs)(n.p,{children:["TanStack Query\ub97c \uc0ac\uc6a9\ud558\ub294 \uc9c4\uc785\uc810\uc5d0\uc11c \uc6b0\ub9ac\ub294 ",(0,a.jsx)(n.code,{children:"QueryClient"})," \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud558\uace0 ",(0,a.jsx)(n.code,{children:"QueryClientProvider"}),"\ub85c \ub118\uaca8\uc11c \uc804\uc5ed\uc5d0\uc11c \ud574\ub2f9 \ud074\ub77c\uc774\uc5b8\ud2b8\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc788\uac8c \ub429\ub2c8\ub2e4. \uc5ec\uae30\uc5d0\uc11c QueryClient\uc5d0 \uc5ec\ub7ec \uc124\uc815\uc744 \ud574\uc904 \uc218 \uc788\ub294\ub370\uc694. Mutation\uc744 \uc911\uc2ec\uc73c\ub85c \uc0b4\ud3b4\ubcf4\uba74, ",(0,a.jsx)(n.code,{children:"defaultOptions"}),"\uc758 ",(0,a.jsx)(n.code,{children:"mutations"}),", ",(0,a.jsx)(n.code,{children:"mutationCache"})," \uc635\uc158\uc774 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"export default function App() {\n  const queryClinet = new QueryClient({\n    defaultOptions: {\n      mutations: {\n        /* Mutation Options */\n      },\n    },\n    mutationCache: /* Mutation Cache */,\n  })\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      {/* children */}\n    </QueryClientProvider>\n  )\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"defaultOptions.mutations"}),"\uc5d0\uc11c\ub294 ",(0,a.jsx)(n.code,{children:"useMutation"}),"\uc5d0 \uc801\uc6a9\ud560 \uae30\ubcf8\uc635\uc158\ub4e4\uc744 \uc124\uc815\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"mutationCache"}),"\uc5d0\uc11c\ub294 Mutation\uc758 \uc800\uc7a5\uc18c\uc778 ",(0,a.jsx)(n.code,{children:"MutationCache"})," \uc778\uc2a4\ud134\uc2a4\ub97c \uc0dd\uc131\ud558\uace0 \ub4f1\ub85d\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.h2,{id:"mutation-cache",children:"Mutation Cache"}),"\n",(0,a.jsxs)(n.p,{children:["\ud2b9\ud788 Mutaion Cache\uc5d0\uc11c\ub294 \uc804\uc5ed\ub808\ubca8\uc5d0\uc11c \ucc98\ub9ac\ub420 \uae00\ub85c\ubc8c \ucf5c\ubc31\ub4e4\uc744(",(0,a.jsx)(n.code,{children:"onError"}),", ",(0,a.jsx)(n.code,{children:"onSuccess"}),", ",(0,a.jsx)(n.code,{children:"onSettled"}),", ",(0,a.jsx)(n.code,{children:"onMutate"}),") \ub4f1\ub85d\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"defaultOptions.mutations"}),"\uc5d0 \ub4f1\ub85d\ud55c sideEffects callback\ub4e4\uacfc\ub294 \ub2e4\ub974\uac8c ",(0,a.jsx)(n.code,{children:"useMutation"}),"\uc758 \uc635\uc158\uc73c\ub85c \ub36e\uc5b4\uc50c\uc6cc\uc9c0\uc9c0 \uc54a\uc73c\uba70 \ud56d\uc0c1 \ud638\ucd9c\ub41c\ub2e4\ub294 \uac83\uc774 \ud2b9\uc9d5\uc785\ub2c8\ub2e4."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"export default function App() {\n  const queryClinet = new QueryClient({\n    // ...\n    mutationCache: new MutationCache({\n      onMutate(...args) {\n        // ...\n      },\n      onError(...args) {\n        // ...\n      },\n      onSuccess(...args) {\n        // ...\n      },\n      onSettled(...args) {\n        // ...\n      },\n    })\n  })\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      {/* children */}\n    </QueryClientProvider>\n  )\n}\n"})}),"\n",(0,a.jsx)(n.h2,{id:"mutation-cache\uc640-meta-\uc815\ubcf4-\ud65c\uc6a9\ud558\uae30",children:"Mutation Cache\uc640 Meta \uc815\ubcf4 \ud65c\uc6a9\ud558\uae30"}),"\n",(0,a.jsx)(n.p,{children:"\ud2b9\ud788 MutationCache\uc758 \ucf5c\ubc31\uc73c\ub85c \ub118\uc5b4\uc624\ub294 \uc778\uc790\uc911 mutation\uc5d0\uc11c meta \uc18d\uc131\uc5d0 \uc811\uadfc\ud560 \uc218 \uc788\ub294\ub370\uc694. \uacb0\ub860\ubd80\ud130 \uc598\uae30\ud558\uc790\uba74 \uc544\ub798\uc640 \uac19\uc774 \ud65c\uc6a9\ud560 \uc218\ub3c4 \uc788\uc2b5\ub2c8\ub2e4."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"export default function App() {\n  const queryClinet = new QueryClient({\n    // ...\n    mutationCache: new MutationCache({\n      // ...\n      onError(error, vars, ctx, mutation) {\n        // meta \uc815\ubcf4\ub97c \ud65c\uc6a9\ud558\uc5ec \ud1a0\uc2a4\ud2b8\uba54\uc2dc\uc9c0\ub97c \ubcf4\uc5ec\uc90d\ub2c8\ub2e4.\n        if (mutation.meta?.shouldShowToastMessage) {\n          Toast.error(mutation.meta?.errorMessage)\n        }\n      },\n      // ...\n    })\n  })\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      {/* children */}\n    </QueryClientProvider>\n  )\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"meta-\ud0c0\uc785-\uc9c0\uc815\ud558\uae30",children:"meta \ud0c0\uc785 \uc9c0\uc815\ud558\uae30"}),"\n",(0,a.jsxs)(n.p,{children:["\ud0c0\uc785\uc2a4\ud06c\ub9bd\ud2b8 \ud658\uacbd\uc5d0\uc11c meta\uc5d0 \uc801\uc808\ud55c \uc815\ubcf4\ub97c \uc8fc\uc785\ud558\uae30 \uc704\ud574\uc11c\ub294 \uc544\ub798\uc640 \uac19\uc774 ",(0,a.jsx)(n.code,{children:"react-query.d.ts"})," \ud30c\uc77c\ub85c \ud0c0\uc785\uc744 \ud655\uc7a5\ud574\uc57c\ud569\ub2c8\ub2e4."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",metastring:'title="react-query.d.ts"',children:"type MutationMeta = {\n  shouldShowToastMessage?: boolean\n  errorMessage?: string\n}\n\ndeclare module '@tanstack/react-query' {\n  interface Register {\n    mutationMeta: MutationMeta\n  }\n}\n\nexport {}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"meta-\uc815\ubcf4-\uc0ac\uc6a9\ud558\uae30",children:"meta \uc815\ubcf4 \uc0ac\uc6a9\ud558\uae30"}),"\n",(0,a.jsxs)(n.p,{children:["\uc774\uc81c \uc544\ub798\uc640 \uac19\uc774 ",(0,a.jsx)(n.code,{children:"useMutation"}),"\uc758 ",(0,a.jsx)(n.code,{children:"options.meta"}),"\uc5d0 \uc801\uc808\ud55c \uac12\uc744 \ud560\ub2f9\ud560 \uc218 \uc788\uac8c \ub429\ub2c8\ub2e4."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"export function useSomeMutation() {\n  return useMutation({\n    mutationFn: resetMemberAnswers,\n    meta: {\n      shouldShowToastMessage: true\n      errorMessage: '\ubba4\ud14c\uc774\uc158 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4.',\n    },\n  })\n}\n"})}),"\n",(0,a.jsx)(n.h3,{id:"callback-\uc2e4\ud589",children:"callback \uc2e4\ud589"}),"\n",(0,a.jsx)(n.p,{children:"useSomeMutation\uc744 \uc0ac\uc6a9\ud560 \ucef4\ud3ec\ub10c\ud2b8\uc5d0 \ub4f1\ub85d\ud558\uace0, mutate \ud568\uc218\ub97c \uc2e4\ud589\ud569\ub2c8\ub2e4."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"const { mutate } = useSomeMutation()\n\n<Button onClick={() => mutate()}>\n  \ubc84\ud2bc\n</Button>\n\n"})}),"\n",(0,a.jsx)(n.p,{children:"\ub2e4\uc2dc \ud55c\ubc88 onError Callback\uc5d0 \uc124\uc815\ud55c \ub0b4\uc6a9\uc744 \ud655\uc778\ud574\ubcf4\uaca0\uc2b5\ub2c8\ub2e4."}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-tsx",children:"export default function App() {\n  const queryClinet = new QueryClient({\n    // ...\n    mutationCache: new MutationCache({\n      // ...\n      onError(error, vars, ctx, mutation) {\n        // meta \uc815\ubcf4\ub97c \ud65c\uc6a9\ud558\uc5ec \ud1a0\uc2a4\ud2b8\uba54\uc2dc\uc9c0\ub97c \ubcf4\uc5ec\uc90d\ub2c8\ub2e4.\n        if (mutation.meta?.shouldShowToastMessage) {\n          Toast.error(mutation.meta?.errorMessage)\n        }\n      },\n      // ...\n    })\n  })\n\n  return (\n    <QueryClientProvider client={queryClient}>\n      {/* children */}\n    </QueryClientProvider>\n  )\n}\n"})}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.code,{children:"MutaionCache"}),"\uc5d0 \ub4f1\ub85d\ub41c callback\uc740 ",(0,a.jsx)(n.code,{children:"useSomeMutation"}),"\uc758 ",(0,a.jsx)(n.code,{children:"mutate"}),"\uc5d0 \uc2e4\ud589\uc5d0 \ub530\ub77c \ubc18\ub4dc\uc2dc \ud568\uaed8 \uc2e4\ud589\ub429\ub2c8\ub2e4. \ub9cc\uc57d \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc600\ub2e4\uba74, ",(0,a.jsx)(n.code,{children:"onError"}),"\uc758 callback\uc774 \uc2e4\ud57c\ub418\uace0, \ub4f1\ub85d\ud574\ub450\uc5c8\ub358 ",(0,a.jsx)(n.code,{children:"meta"})," \uc815\ubcf4\uac00 \uc804\ub2ec\ub418\uc5b4 '\ubba4\ud14c\uc774\uc158 \uc5d0\ub7ec\uac00 \ubc1c\uc0dd\ud558\uc600\uc2b5\ub2c8\ub2e4.' \uba54\uc2dc\uc9c0\uac00 \ub098\ud0c0\ub098\uac8c \ub420 \uac83\uc785\ub2c8\ub2e4."]}),"\n",(0,a.jsx)("br",{}),"\n",(0,a.jsx)(n.h2,{id:"\uc815\ub9ac",children:"\uc815\ub9ac"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsx)(n.li,{children:"\ubc18\ub4dc\uc2dc \uc2e4\ud589\ub41c\ub2e4\ub294 \uc810"}),"\n",(0,a.jsx)(n.li,{children:"meta\ub85c \ud2b9\uc815 \uc815\ubcf4\ub97c \ub118\uae38 \uc218 \uc788\ub2e4\ub294 \uc810"}),"\n"]}),"\n",(0,a.jsxs)(n.p,{children:["\uc704 \ub450\uac00\uc9c0 \ud2b9\uc9d5\uc73c\ub85c \uc778\ud574 MutationCache\ub97c \ud65c\uc6a9\ud558\uc5ec \uacf5\ud1b5\uc73c\ub85c \ucc98\ub9ac\ud560 \ubd80\ubd84\uc5d0 \ub300\ud574\uc11c \uc5ec\ub7ec \ubc29\uba74\uc73c\ub85c \ud65c\uc6a9\ud560 \uae30\ud68c\uac00 \uc788\uc744 \uac83 \uac19\uc2b5\ub2c8\ub2e4. \uc608\uc81c\uc5d0\uc11c\ub294 ",(0,a.jsx)(n.code,{children:"onError"}),"\uc5d0 \ub300\ud574\uc11c\ub9cc \uc791\uc131\ud558\uc600\uc73c\ub098, \ubaa8\ub4e0 Callback\uc5d0 \ub300\ud574\uc11c\ub3c4 \ub3d9\uc77c\ud558\uac8c \uc801\uc6a9\ub429\ub2c8\ub2e4. \uc2ec\uc9c0\uc5b4 Query \uc601\uc5ed\uc758 ",(0,a.jsx)(n.code,{children:"QueryCache"}),"\uc5d0\uc11c\ub3c4 \ub3d9\uc77c\ud558\uac8c \uc801\uc6a9\ub418\ub2c8\uae4c\uc694!"]})]})}function d(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(u,{...e})}):u(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>c,a:()=>o});var a=t(7294);const r={},i=a.createContext(r);function o(e){const n=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);